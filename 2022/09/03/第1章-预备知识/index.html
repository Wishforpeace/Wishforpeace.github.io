

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="WYX ">
  <meta name="keywords" content="">
  
    <meta name="description" content="第1章    预备知识1.1 机器语言与汇编语言1.1.1 机器语言机器指令：操作码 + 地址码 指令的全体为计算机的指令系统 指令集合为机器语言 机器语言程序 1.1.2 汇编语言助记符表示机器指令的操作码；用变量代替操作数的存放地址；在指令前冠以标号， 用来代表该指令的存放地址等。  指令助记符、语句标号、数据变量、伪指令及它们的使用规则构成了整个汇编语言的内容。 1.2 Intel系列机 1">
<meta property="og:type" content="article">
<meta property="og:title" content="第1章 预备知识">
<meta property="og:url" content="http://example.com/2022/09/03/%E7%AC%AC1%E7%AB%A0-%E9%A2%84%E5%A4%87%E7%9F%A5%E8%AF%86/index.html">
<meta property="og:site_name" content="WYX同学的Blog">
<meta property="og:description" content="第1章    预备知识1.1 机器语言与汇编语言1.1.1 机器语言机器指令：操作码 + 地址码 指令的全体为计算机的指令系统 指令集合为机器语言 机器语言程序 1.1.2 汇编语言助记符表示机器指令的操作码；用变量代替操作数的存放地址；在指令前冠以标号， 用来代表该指令的存放地址等。  指令助记符、语句标号、数据变量、伪指令及它们的使用规则构成了整个汇编语言的内容。 1.2 Intel系列机 1">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Wishforpeace/Notes/picture/image-20220903152705420.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Wishforpeace/Notes/picture/image-20220903154542135.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Wishforpeace/Notes/picture/image-20220903204235387.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Wishforpeace/Notes/picture/image-20220903204213353.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Wishforpeace/Notes/picture/image-20220903205005287.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Wishforpeace/Notes/picture/image-20220903205642816.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Wishforpeace/Notes/picture/image-20220904155556771.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Hyeonwuu/Image/image-20220904210520629.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Hyeonwuu/Image/image-20220904211612369.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Hyeonwuu/Image/image-20220904212532573.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Hyeonwuu/Image/image-20220904213647690.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Hyeonwuu/Image/image-20220904214102185.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Hyeonwuu/Image/image-20220905162139363.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Hyeonwuu/Image/image-20220905162310714.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Hyeonwuu/Image/image-20220905162515343.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Hyeonwuu/Image/image-20220905162706328.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Hyeonwuu/Image/image-20220905170358493.png">
<meta property="article:published_time" content="2022-09-03T07:12:49.000Z">
<meta property="article:modified_time" content="2022-09-12T13:11:03.212Z">
<meta property="article:author" content="WYX ">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Wishforpeace/Notes/picture/image-20220903152705420.png">
  
  
  
  <title>第1章 预备知识 - WYX同学的Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>WYX&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="第1章 预备知识"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-09-03 15:12" pubdate>
          September 3, 2022 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          5.4k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          45 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">第1章 预备知识</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="第1章-预备知识"><a href="#第1章-预备知识" class="headerlink" title="第1章    预备知识"></a>第1章    预备知识</h1><h2 id="1-1-机器语言与汇编语言"><a href="#1-1-机器语言与汇编语言" class="headerlink" title="1.1 机器语言与汇编语言"></a>1.1 机器语言与汇编语言</h2><h3 id="1-1-1-机器语言"><a href="#1-1-1-机器语言" class="headerlink" title="1.1.1 机器语言"></a>1.1.1 机器语言</h3><p>机器指令：操作码 + 地址码</p>
<p>指令的全体为计算机的<strong>指令系统</strong></p>
<p>指令集合为<strong>机器语言</strong></p>
<p><strong>机器语言程序</strong></p>
<h3 id="1-1-2-汇编语言"><a href="#1-1-2-汇编语言" class="headerlink" title="1.1.2 汇编语言"></a>1.1.2 汇编语言</h3><p><strong>助记符</strong>表示机器指令的<strong>操作码</strong>；用变量代替操作数的<strong>存放地址</strong>；在指令前冠以<strong>标号</strong>， 用来代表该指令的存放地址等。 </p>
<p><strong>指令助记符、语句标号、数据变量、伪指令</strong>及它们的使用规则构成了整个汇编语言的内容。</p>
<h2 id="1-2-Intel系列机"><a href="#1-2-Intel系列机" class="headerlink" title="1.2 Intel系列机"></a>1.2 Intel系列机</h2><p><img src="https://cdn.jsdelivr.net/gh/Wishforpeace/Notes/picture/image-20220903152705420.png" srcset="/img/loading.gif" lazyload alt="image-20220903152705420"></p>
<h3 id="1-2-1-Intel-80X86-微处理器简介"><a href="#1-2-1-Intel-80X86-微处理器简介" class="headerlink" title="1.2.1 Intel 80X86 微处理器简介"></a>1.2.1 Intel 80X86 微处理器简介</h3><p><strong>8086</strong>:16位CPU</p>
<p><strong>80286</strong>:直接寻址16MB贮存，含有四个独立处理部件：执行部件、总线部件、指令部件和地址部件</p>
<p>提供两种工作方式：<strong>实地址方式和保护方式</strong></p>
<h3 id="1-2-2-Intel-80X86微处理结构"><a href="#1-2-2-Intel-80X86微处理结构" class="headerlink" title="1.2.2 Intel 80X86微处理结构"></a>1.2.2 Intel 80X86微处理结构</h3><p>32位CPU分为六大部件：</p>
<ul>
<li>总线接口部件</li>
<li>执行部件</li>
<li>指令预取部件</li>
<li>指令编译部件</li>
<li>分段部件</li>
<li>分页部件</li>
</ul>
<h4 id="1-总线接口部件"><a href="#1-总线接口部件" class="headerlink" title="1.总线接口部件"></a>1.总线接口部件</h4><p>CPU与整个计算机系统之间的高速接口</p>
<p>接受总线请求，按有限权进行选择，最大限度利用本身资源位请求服务</p>
<h4 id="2-执行部件"><a href="#2-执行部件" class="headerlink" title="2.执行部件"></a>2.执行部件</h4><h5 id="（1）数据寄存器组-EAX、EBX、ECX、EDX"><a href="#（1）数据寄存器组-EAX、EBX、ECX、EDX" class="headerlink" title="（1）数据寄存器组(EAX、EBX、ECX、EDX)"></a>（1）数据寄存器组(EAX、EBX、ECX、EDX)</h5><p><img src="https://cdn.jsdelivr.net/gh/Wishforpeace/Notes/picture/image-20220903154542135.png" srcset="/img/loading.gif" lazyload alt="image-20220903154542135"></p>
<p>EAX(Accumulator)：暂存</p>
<p>EBX(Base):</p>
<p>ECX(Count)：标志循环次数上届</p>
<p>EDX(Data):保存操作数</p>
<h5 id="2-指示器编制寄存器组-ESI、EDI、ESP、EBP"><a href="#2-指示器编制寄存器组-ESI、EDI、ESP、EBP" class="headerlink" title="(2)指示器编制寄存器组(ESI、EDI、ESP、EBP)"></a>(2)指示器编制寄存器组(ESI、EDI、ESP、EBP)</h5><p>存放操作数的偏移地址，用作指示器或变址寄存器。</p>
<ul>
<li>ESP：堆栈指示器，栈顶指针</li>
<li>EBP：基址寄存器，存放存储单元的偏移地址</li>
<li>ESI和EDI:指示器、变址寄存器</li>
<li>ESI用作取源操作数的指示器，源变址寄存器</li>
<li>EDI用作送目的操作数的指示器，目的变址寄存器</li>
</ul>
<h4 id="3-指令预取部件和指令译码部件"><a href="#3-指令预取部件和指令译码部件" class="headerlink" title="3.指令预取部件和指令译码部件"></a>3.指令预取部件和指令译码部件</h4><ul>
<li>指令<strong>预取</strong>部件：把<strong>将要执行</strong>的指令从主存之中取出，送入指令排队机构中排队（此处为复杂的排队系统）</li>
<li>指令<strong>译码</strong>部件：从预取指令队列中读<strong>出指令并译码</strong>，再送入译码指令队列排队供执行部件使用</li>
</ul>
<p>独取指令时，用到很重要的寄存器——<strong>指令指示器</strong></p>
<p>保存下一条将要被CPU执行的指令的偏移地址（EA）</p>
<p>16位代码段之中，指令指示器也为16位，称为IP，可以表示64k的偏移地址</p>
<p>32位代码段之中，EIP，表示4G的偏移地址</p>
<h4 id="4-分段部件、分页部件"><a href="#4-分段部件、分页部件" class="headerlink" title="4.分段部件、分页部件"></a>4.分段部件、分页部件</h4><p>程序投入运行时，系统会为每个程序分配一片独立的虚拟内存空间</p>
<p>只有主存中的程序和数据才能够被访问，所以在执行某一程序或访问某一数据，必须要将其所在的虚拟空间映射到物理存储空间</p>
<p>32位CPU使用<strong>分段部件</strong>和<strong>分页部件</strong>实现这一映射</p>
<p><strong>分段部件</strong>用于将各段<strong>二维</strong>的逻辑地址转换为<strong>一维</strong>的线性地址， 从而完成从<strong>虚拟空间</strong>到<strong>线性空间</strong>的转换， 实现系统与用户、用户与用户之间的隔离与共享。</p>
<p>分段部件有 ６ 个 １６ 位的段寄存器， 它们分别是：</p>
<p>ＣＳ———代码段寄存器；</p>
<p>ＳＳ———堆栈段寄存器；</p>
<p>ＤＳ———数据段寄存器；</p>
<p>ＥＳ、ＦＳ、ＧＳ———附加数据段寄存器。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Wishforpeace/Notes/picture/image-20220903204235387.png" srcset="/img/loading.gif" lazyload alt="image-20220903204235387" style="zoom:33%;" /></p>
<p>实方式下，段的大小最大只能为64KB，取数据或指令的物理地址<strong>直接通过段寄存器的内容和EＡ生成</strong></p>
<p>保护方式下，段大小可达4GB，这时的段寄存器内容称为<strong>选择符</strong>，通过该选择符找到描述符表，取出描述符后才能确定所需访问的段和存储单元</p>
<ul>
<li>分段部件构造虚拟存储空间</li>
<li>分页部件则主要用于物理存储器的管理</li>
</ul>
<h3 id="1-2-3-80X86的3种工作方式"><a href="#1-2-3-80X86的3种工作方式" class="headerlink" title="1.2.3  80X86的3种工作方式"></a>1.2.3  80X86的3种工作方式</h3><h4 id="1-实地址方式"><a href="#1-实地址方式" class="headerlink" title="1.实地址方式"></a>1.实地址方式</h4><p>32位寄存器、32位操作数、32位寻址方式</p>
<p>32位CPU和16位CPU只能寻址1MB物理存储空间，程序段段大小不超过64KB</p>
<p>段基址和偏移地址都是32位（16位段）</p>
<h4 id="2-保护方式"><a href="#2-保护方式" class="headerlink" title="2.保护方式"></a>2.保护方式</h4><p>32位地址先，寻址4GB的物理存储空间，虚拟存储空看可达64TB</p>
<p>段基址和段内偏移量都是32位，程序段的大小可达4GB，这样的段也称为“32位”。</p>
<h4 id="3-保护方式下的虚拟8086方式（V86方式）"><a href="#3-保护方式下的虚拟8086方式（V86方式）" class="headerlink" title="3.保护方式下的虚拟8086方式（V86方式）"></a>3.保护方式下的虚拟8086方式（V86方式）</h4><p>保护方式下运行的类似实方式的工作环境</p>
<p>对于80X86中的32位ＣＰＵ，在实方式下执行的是16位段的程序(寄存器和数据可以是 32/16位);在保护方式下可以对 32位段和 16位段的程序单独或混合操作；</p>
<p>虚 拟 8086方式可并行执行多个 8086的16位段程序，但由于它与实方式的特权级不同，因此，它还不能代替实方式。 </p>
<h2 id="1-3-主存储器和物地址的形成"><a href="#1-3-主存储器和物地址的形成" class="headerlink" title="1.3 主存储器和物地址的形成"></a>1.3 主存储器和物地址的形成</h2><h3 id="1-3-1主存储器"><a href="#1-3-1主存储器" class="headerlink" title="1.3.1主存储器"></a>1.3.1主存储器</h3><p><strong>存储器</strong>是用来存放程序和数据的装置</p>
<p><strong>主存</strong>设在主机内部，用来存放当前运行的程序和所需的数据，一边随时像CPU高速提供信息</p>
<p>主存由许多存储位构成，这些储存位<strong>每8位</strong>组合成<strong>一个字节</strong>，</p>
<p>每相邻的<strong>2个字节</strong>又可以组成一个<strong>字</strong>，</p>
<p>相邻的<strong>2个字</strong>有可以组成一个<strong>双字</strong>。</p>
<h4 id="区分不同字节存储单元："><a href="#区分不同字节存储单元：" class="headerlink" title="区分不同字节存储单元："></a><strong>区分不同字节存储单元</strong>：</h4><h5 id="物理地址-PA"><a href="#物理地址-PA" class="headerlink" title="物理地址(PA):"></a>物理地址(PA):</h5><p>​    每一单元被指定一个编号，用以区分不同字节存储单元。</p>
<p>​    80X86机的主存是按8位字节编址的，即以字节为最小寻址单位。</p>
<p>字由相邻两个字节组成，规定字地址由2个字节中较小的确定</p>
<p>双字地址由4个字节的最低地址确定</p>
<p>存放在主存中的程序和数据一般均按<strong>物理地址</strong>存取</p>
<p><strong>字数据</strong>低8位存放在低地址字节中，高8位存放在相邻的高地址字节中；<strong>双字数据</strong>存放是低16位存放在低地址字中，高16位存放在相邻的高地址字中。</p>
<h3 id="1-3-2-堆栈"><a href="#1-3-2-堆栈" class="headerlink" title="1.3.2 堆栈"></a>1.3.2 堆栈</h3><p><strong>先进后出</strong>原则，进栈为“压入”，出栈为“弹出”。</p>
<p>堆栈由一片<strong>存储单元</strong>和一个<strong>指示器</strong>组成，固定端叫做<strong>栈底</strong></p>
<ul>
<li><strong>栈指针</strong>：用来指示栈元素进栈和出栈时偏移地址的变化</li>
<li><strong>栈顶</strong>：指针所指示的最后存入数据的单元</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Wishforpeace/Notes/picture/image-20220903204213353.png" srcset="/img/loading.gif" lazyload alt="image-20220903204213353" style="zoom:33%;" /></p>
<h4 id="1-进栈指令PUSH"><a href="#1-进栈指令PUSH" class="headerlink" title="1.进栈指令PUSH"></a>1.进栈指令PUSH</h4><p>语句格式：PUSH OPS</p>
<p>功能：将立即数或寄存器、段寄存、存储器中的一个字/双字数据压入堆栈中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs assembly">PUSH 04F8H<br>执行前:(SP)=1000H<br>执行：(SP)-2 -&gt;SP<br>			04F8H-&gt;[SP]<br></code></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/Wishforpeace/Notes/picture/image-20220903205005287.png" srcset="/img/loading.gif" lazyload alt="image-20220903205005287" style="zoom:33%;" /></p>
<h4 id="2-出栈指令POP"><a href="#2-出栈指令POP" class="headerlink" title="2.出栈指令POP"></a>2.出栈指令POP</h4><p>语句格式：POP OPD</p>
<p>功能：将栈顶元素弹出送至某一寄存器、段寄存器或存储器中。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Wishforpeace/Notes/picture/image-20220903205642816.png" srcset="/img/loading.gif" lazyload alt="image-20220903205642816" style="zoom: 33%;" /></p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs x86asm"><span class="hljs-keyword">POP</span> <span class="hljs-built_in">BX</span><br>执行前:<span class="hljs-keyword">POP</span> <span class="hljs-built_in">BX</span><br>执行:([<span class="hljs-built_in">SP</span>])-&gt;<span class="hljs-built_in">BX</span><br>			(<span class="hljs-built_in">SP</span>)+<span class="hljs-number">1</span>-&gt;<span class="hljs-built_in">SP</span><br>执行后:(<span class="hljs-built_in">BX</span>)=<span class="hljs-number">04F8H</span><span class="hljs-comment">;(SP)=1000H</span><br></code></pre></td></tr></table></figure>
<p>除了PUSH和POP指令外，如果其他指令要访问堆栈，也可以通过基址寄存器BP进行</p>
<p><strong>注意</strong>:</p>
<ol>
<li>当堆栈段为16位段时，系统自动使用SP作栈指针；32位，使用ESP</li>
<li>进栈或出栈操作时，<strong>栈指针(SP/ESP)</strong>移动的字节数取决于操作数的类型。字操作，(SP/ESP)均是±2，双字操作，(SP/ESP)均为±4</li>
</ol>
<h4 id="3-将8个寄存器内容顺序入栈指令"><a href="#3-将8个寄存器内容顺序入栈指令" class="headerlink" title="3.将8个寄存器内容顺序入栈指令"></a><del>3.将8个寄存器内容顺序入栈指令</del></h4><p><del>该指令分为<strong>8个16位寄存器</strong>入栈和对<strong>8个32位寄存器</strong>入栈</del></p>
<h5 id="1-将8个16位寄存器入栈"><a href="#1-将8个16位寄存器入栈" class="headerlink" title="(1)将8个16位寄存器入栈"></a><del>(1)将8个16位寄存器入栈</del></h5><p><del>语句格式：PUSHA</del></p>
<p><del>功能：将8个16位寄存器按AX、CX、DX、BX、SP、BP、SI、DI顺序入栈保存</del></p>
<h3 id="1-3-3-物理地址的形成"><a href="#1-3-3-物理地址的形成" class="headerlink" title="1.3.3 物理地址的形成"></a>1.3.3 物理地址的形成</h3><p>80X86机，最低档CPU为8086，20根地址线，寻址能力为$2^{20}B$，主内存容量为1MB，物理地址编号从0~0FFFFFH。</p>
<p>此时CPU与存储器交换信息必须要<strong>20位的物理地址</strong>，但是8086内部为<strong>16位结构</strong>，寄存器也是16位的。</p>
<p>16位寄存器进行地址运算，表示16位地址，<strong>操作数范围最大为64KB</strong>。</p>
<h4 id="主存分段使用方案："><a href="#主存分段使用方案：" class="headerlink" title="主存分段使用方案："></a>主存分段使用方案：</h4><p><img src="https://cdn.jsdelivr.net/gh/Wishforpeace/Notes/picture/image-20220904155556771.png" srcset="/img/loading.gif" lazyload alt="image-20220904155556771" style="zoom:33%;" /></p>
<p>将1MB的存储器<strong>按64KB分段</strong>，设置4个段寄存器CS、DS、SS、ES，保存当前可使用段的段首址。</p>
<p>段首址从刚好被<strong>16整除</strong>的地址开始，<strong>低四位均为0</strong>，忽略这些0，刚好16位可以存入段寄存器之中，然后操作时，内容左移4位，补上4个0，再加上某待访问存储单元的偏移地址，获得20位物理地址。</p>
<p>存储单元的地址由两部分组成：<strong>段首地址：偏移地址</strong>，被称为<strong>二维的逻辑地址</strong></p>
<h4 id="1-实方式物理地址的形成"><a href="#1-实方式物理地址的形成" class="headerlink" title="1. 实方式物理地址的形成"></a>1. 实方式物理地址的形成</h4><p>实方式情况下，32位CPU只能寻址1MB的物理存储空间，采用分段使用的方式，每段大小不超过64KB，段首地址和段内偏移地址都用16位表示。</p>
<p>在每一给定时刻，CPU可以在不修改段寄存器内容的情况下访问6个段：</p>
<ul>
<li>代码段</li>
<li>堆栈段</li>
<li>数据段</li>
<li>3个附加数据段</li>
</ul>
<p>这些当前能被CPU访问段的首地址由分段部件中的6个专用段寄存器给出</p>
<ul>
<li>CS：给出当前代码段首地址（取指令指针为IP）</li>
<li>SS：给出当前堆栈段首地址（取栈指针为SP）</li>
<li>DS：给出当前数据段首地址</li>
<li>ES、FS、GS：给出当前附加数据段首地址</li>
</ul>
<ul>
<li><strong>代码段</strong>是程序代码的存储区，指令指示器IP总是保存着下一条将要取出指令相对于<strong>CS</strong>的偏移地址在<strong>代码段中取指令</strong>时，指令物理地址：</li>
</ul>
<p>​                                        $PA = (CS)_{左移4位}+(IP)$</p>
<ul>
<li><p><strong>堆栈段</strong>时程序的<strong>临时数据存储区</strong>，存放暂时无用的数据。用户自定义堆栈段，作子程序调用、系统功能调用、中断处理等操作。系统以<strong>SP</strong>为指针，做堆栈操作时，栈顶物理地址：</p>
<p>​                                $PA = (SS)_{左移4位}+(SP)$</p>
</li>
<li><p><strong>数据段和附加数据段</strong>是程序<strong>使用时</strong>的数据存储区。附加数据段和数据段重合，设置成一个段，数据的物理地址：</p>
<p>​                                $PA = (DS或ES、FS、GS)_{左移4位}+16位偏移地址$</p>
</li>
</ul>
<h5 id="说明："><a href="#说明：" class="headerlink" title="说明："></a>说明：</h5><ul>
<li><p>程序大小可以自定，但是必须要小于或等于64KB，每个段在主存的具体位置由操作系统分配</p>
</li>
<li><p>分段不唯一，某一片具体存储单元，可以属于一个段，也可以属于多个段</p>
</li>
<li>汇编源程序之中，用户必须将数据段首址置入DS、ES、FS、GS，而CS、SS由系统自动录入</li>
</ul>
<h4 id="2-保护方式下物理地址的形成"><a href="#2-保护方式下物理地址的形成" class="headerlink" title="2.保护方式下物理地址的形成"></a>2.保护方式下物理地址的形成</h4><p>保护方式，使用32根地址线，可以寻址4GB物理存储空间，程序大小也可达到4GB，段基址和段内偏移地址都为32位。</p>
<p><strong>多任务机制</strong>：对虚拟存储空间的任务进入主存进行合理调度和分配，实施执行环境的<strong>隔离和保护</strong>。</p>
<h5 id="1-特权级"><a href="#1-特权级" class="headerlink" title="(1) 特权级"></a>(1) 特权级</h5><p><img src="https://cdn.jsdelivr.net/gh/Hyeonwuu/Image/image-20220904210520629.png" srcset="/img/loading.gif" lazyload alt="image-20220904210520629"></p>
<h5 id="2-描述符"><a href="#2-描述符" class="headerlink" title="(2) 描述符"></a>(2) 描述符</h5><p>除了段基址以外，其余信息被整合到一起，用4个字来描述，被称为<strong>描述符</strong></p>
<p>按不同的描述对象，可分为：</p>
<ul>
<li>存储段描述符</li>
<li>系统段描述符</li>
<li>控制描述符</li>
</ul>
<h6 id="描述符通用结构"><a href="#描述符通用结构" class="headerlink" title="描述符通用结构"></a>描述符通用结构</h6><p><img src="https://cdn.jsdelivr.net/gh/Hyeonwuu/Image/image-20220904211612369.png" srcset="/img/loading.gif" lazyload alt="image-20220904211612369"></p>
<ul>
<li><p>32位段基址（不分页，该基地址为段在主存的起始物理地址）</p>
</li>
<li><p>20位段界限（段长度）</p>
</li>
<li><p>第三个字的高字节描述了段的性质及当前使用情况</p>
<ul>
<li><p><strong>P</strong>：存在为，P=1，描述符对应段存在，P=0，不存在</p>
</li>
<li><p><strong>DPL</strong>：描述符对应段的特权级</p>
</li>
<li><p><strong>S</strong>：段类型，S=1，存储段描述符（程序代码段、数据段），S=0，存储系统描述符</p>
</li>
<li><p><strong>TYPE</strong>：段的具体属性，共有三位。对存储段来说， 第 11位<strong>E</strong>描述了该段<strong>是否为可执行段</strong>。 Ｅ ＝０ 说明该段为不可执行段， 即为数据段或堆栈段；Ｅ ＝１ 说明该段为可执行段， 即为代码段。</p>
<p> 在两种不同类型的段中， 另两位（第 １０ ～９ 位）所描述的内容是不同的</p>
<p><img src="https://cdn.jsdelivr.net/gh/Hyeonwuu/Image/image-20220904212532573.png" srcset="/img/loading.gif" lazyload alt="image-20220904212532573"></p>
</li>
<li><p><strong>A</strong>：已访问位</p>
</li>
</ul>
</li>
<li><p>第四个字7~4描述信息</p>
<ul>
<li><strong>G</strong>：粒度位  Ｇ ＝０ 时说明段长度的计量单位为字节(B)；Ｇ ＝１ 时说明段长度的计量单位为页， １ 页为 ４KB。</li>
<li><strong>D</strong>：D=0，16位操作数和16位有效地址，堆栈使用SP作指针，界限值0FFFFH；D=1，32位操作数和32位有效地址， 堆栈使用ESP指针，界限值0FFFFFFFFH。剩余两位为保留位和系统专用位。</li>
</ul>
</li>
</ul>
<h5 id="3-描述符表"><a href="#3-描述符表" class="headerlink" title="(3)描述符表"></a>(3)描述符表</h5><ul>
<li>局部描述符表</li>
<li>全局描述符表</li>
<li>中断描述符表</li>
</ul>
<h5 id="4-段选择符和描述符寄存器"><a href="#4-段选择符和描述符寄存器" class="headerlink" title="(4)段选择符和描述符寄存器"></a>(4)段选择符和描述符寄存器</h5><p>保护方式下，段寄存器不保存段的开始地址，从描述符表中选择相应段的描述符的方式。</p>
<h6 id="段选择符"><a href="#段选择符" class="headerlink" title="段选择符"></a>段选择符</h6><p><img src="https://cdn.jsdelivr.net/gh/Hyeonwuu/Image/image-20220904213647690.png" srcset="/img/loading.gif" lazyload alt="image-20220904213647690" style="zoom:33%;" /></p>
<h5 id="5-保护方式下物理地址的形成"><a href="#5-保护方式下物理地址的形成" class="headerlink" title="(5)保护方式下物理地址的形成"></a>(5)保护方式下物理地址的形成</h5><ol>
<li>根据段寄存器中的描述符索引值、TI及RPL值，从描述符表中选出描述符，然后判断是否有溢出，进行特权级、使用合法性及各种相关属性检查，合格之后送入对应描述符高速缓冲寄存器。</li>
<li>需要对该段存储空间访问时，从描述符高速缓冲寄存器中取出段基址，与存放于EIP/ESP或某一指示器中的偏移地址相加，形成32位线性地址。</li>
<li>不分页，则得到物理地址；分页的话，经过分页部件映射，将线性地址转换为物理地址。</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/Hyeonwuu/Image/image-20220904214102185.png" srcset="/img/loading.gif" lazyload alt="image-20220904214102185"></p>
<h2 id="1-4数据在计算机内的表示形式"><a href="#1-4数据在计算机内的表示形式" class="headerlink" title="1.4数据在计算机内的表示形式"></a>1.4数据在计算机内的表示形式</h2><ul>
<li>二进制<ul>
<li>字节</li>
<li>字</li>
<li>双字</li>
<li>三字</li>
<li>四字</li>
<li>十字</li>
</ul>
</li>
<li>八进制</li>
<li>十六进制</li>
<li>BCD码</li>
</ul>
<h3 id="1-4-1-数值数据在计算机内的表示形式"><a href="#1-4-1-数值数据在计算机内的表示形式" class="headerlink" title="1.4.1 数值数据在计算机内的表示形式"></a>1.4.1 数值数据在计算机内的表示形式</h3><ul>
<li>定点表示法</li>
<li>浮点表示法</li>
</ul>
<p>有符号数一律采用二进制补码</p>
<p><img src="https://cdn.jsdelivr.net/gh/Hyeonwuu/Image/image-20220905162139363.png" srcset="/img/loading.gif" lazyload alt="image-20220905162139363"></p>
<p>计算机在进行<strong>算术逻辑运算时</strong>， 总是把参与运算的、用补码表示的操作数作为无符号数处理， 这时， 数的表示范围则与前面讨论的完全不同。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Hyeonwuu/Image/image-20220905162310714.png" srcset="/img/loading.gif" lazyload alt="image-20220905162310714"></p>
<h3 id="1-4-2-BCD码"><a href="#1-4-2-BCD码" class="headerlink" title="1.4.2 BCD码"></a>1.4.2 BCD码</h3><p>利用4位二进制表示十进制数</p>
<p><img src="https://cdn.jsdelivr.net/gh/Hyeonwuu/Image/image-20220905162515343.png" srcset="/img/loading.gif" lazyload alt="image-20220905162515343" style="zoom: 50%;" /></p>
<p>BCD码：</p>
<ul>
<li><p>未压缩的BCD码</p>
<ul>
<li>每个字节只放一个十进制位数</li>
</ul>
</li>
<li><p>压缩的BCD码</p>
<ul>
<li>一个字节存放两个十进制位数</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Hyeonwuu/Image/image-20220905162706328.png" srcset="/img/loading.gif" lazyload alt="image-20220905162706328" style="zoom:50%;" /></p>
</li>
</ul>
<h3 id="1-4-3-字符数据在机内的表示形式"><a href="#1-4-3-字符数据在机内的表示形式" class="headerlink" title="1.4.3 字符数据在机内的表示形式"></a>1.4.3 字符数据在机内的表示形式</h3><p>$ASCII$码标准</p>
<h2 id="1-5-标志寄存器"><a href="#1-5-标志寄存器" class="headerlink" title="1.5 标志寄存器"></a>1.5 标志寄存器</h2><p><strong>标志寄存器</strong>：保存在一条指令执行之后， ＣＰＵ 所处状态的信息及运算结果的特征。</p>
<p>16位CPU中的标志寄存器是16位的，称为FLAGS，32位CPU中的标志寄存器是32位的，称EFLAGS</p>
<p>32位向下兼容</p>
<h3 id="1-5-1-标志位"><a href="#1-5-1-标志位" class="headerlink" title="1.5.1 标志位"></a>1.5.1 标志位</h3><p><img src="https://cdn.jsdelivr.net/gh/Hyeonwuu/Image/image-20220905170358493.png" srcset="/img/loading.gif" lazyload alt="image-20220905170358493"></p>
<p>常用标志位：</p>
<ul>
<li>条件标志位</li>
<li>控制标志位</li>
<li>32位寄存器扩充的系统标志位</li>
</ul>
<h4 id="1-条件标志位"><a href="#1-条件标志位" class="headerlink" title="1.条件标志位"></a>1.条件标志位</h4><p>由CPU根据执行完一条指令后所得运算结果的特征自动设置的，主要用作控制条件转移指令是否转移的条件。</p>
<ul>
<li>符号标志SF（第7位）</li>
<li>零标志符ZF（第6位）</li>
<li>溢出标志OF（第11位）</li>
<li>进位标志CF（第0位）</li>
<li>辅助进位标志AF（第4位）</li>
<li>奇偶标志位PF（第2位）</li>
</ul>
<h4 id="2-控制标志位"><a href="#2-控制标志位" class="headerlink" title="2.控制标志位"></a>2.控制标志位</h4><ul>
<li>方向标志DF</li>
<li>中断允许标志IF</li>
<li>跟踪标志TF</li>
</ul>
<h4 id="3-32-位标志寄存器扩充的系统标志位"><a href="#3-32-位标志寄存器扩充的系统标志位" class="headerlink" title="3.32 位标志寄存器扩充的系统标志位"></a>3.32 位标志寄存器扩充的系统标志位</h4><ul>
<li>IO 特权标志 IOPL<ul>
<li>占两位，指定了要求执行I/O指令的特权级</li>
</ul>
</li>
<li>嵌套任务标志 NT<ul>
<li>控制中断返回指令的执行</li>
</ul>
</li>
<li>恢复标志RF<ul>
<li>与寄存器一起使用，确定是否接受调试故障</li>
</ul>
</li>
<li>虚拟8086方式标志VM<ul>
<li>VM置1，CPU在虚拟8086方式下工作，置0，保护方式下工作</li>
</ul>
</li>
</ul>
<h3 id="1-5-2标志寄存器操作指令"><a href="#1-5-2标志寄存器操作指令" class="headerlink" title="1.5.2标志寄存器操作指令"></a>1.5.2标志寄存器操作指令</h3><h4 id="1-标志寄存器传送指令"><a href="#1-标志寄存器传送指令" class="headerlink" title="1.标志寄存器传送指令"></a>1.标志寄存器传送指令</h4><h5 id="1-LAHF"><a href="#1-LAHF" class="headerlink" title="(1)LAHF"></a>(1)LAHF</h5><p>功能：将标志寄存器低8位存入AH中，即$(EFALGS){7~0} \rightarrow AH$</p>
<h5 id="2-SAHF"><a href="#2-SAHF" class="headerlink" title="(2)SAHF"></a>(2)SAHF</h5><p>功能：将AH中的内容送入标志寄存器的低8位之中，高位保持不变。</p>
<h4 id="2-32位标志寄存器进栈指令PUSHFD"><a href="#2-32位标志寄存器进栈指令PUSHFD" class="headerlink" title="2.32位标志寄存器进栈指令PUSHFD"></a>2.32位标志寄存器进栈指令PUSHFD</h4><p>功能：将标志寄存器的内容压入堆栈之中</p>
<p>​        $(EFLAGS)\rightarrow \downarrow(ESP/SP) $</p>
<h4 id="3-32位标志寄存器出栈指令POPFD"><a href="#3-32位标志寄存器出栈指令POPFD" class="headerlink" title="3.32位标志寄存器出栈指令POPFD"></a>3.32位标志寄存器出栈指令POPFD</h4><p>功能：$\uparrow(ESP/SP)\rightarrow EFLAGS$</p>
<p>说明：该指令不影响标志位RF、VM、IOPL、VIF、VIP和未定义位。</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/" class="category-chain-item">汇编语言</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>第1章 预备知识</div>
      <div>http://example.com/2022/09/03/第1章-预备知识/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>WYX </div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>September 3, 2022</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>Licensed under</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/09/12/%E7%AC%AC2%E7%AB%A0-%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/" title="第2章 寻址方式">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">第2章 寻址方式</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/08/08/go%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E5%88%B0linxu/" title="go项目部署到linxu">
                        <span class="hidden-mobile">go项目部署到linxu</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;Table of Contents</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a>
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
